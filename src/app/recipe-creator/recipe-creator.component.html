<div class="creator-base">
  <h1>Recipe Creator</h1>

  <!-- Selector to update recipes -->
  <mat-form-field>
    <mat-label>Recipe to update</mat-label>
    <mat-select [formControl]="recipeUpdateControl">
      <mat-option [value]="">None</mat-option>
      <mat-option *ngFor="let recipeName of recipeNames" [value]="recipeName">
        {{recipeName}}
      </mat-option>
      </mat-select>
  </mat-form-field>

  <mat-form-field>
    <mat-label>Name</mat-label>
    <input matInput [formControl]="recipeNameControl">
  </mat-form-field>

  <mat-tab-group>
    <!-- tab for the ingredients of the recipe -->
    <mat-tab label="Items">
      <div class="recipe-tab">
        <button mat-flat-button color="accent" (click) = "addIngredient()">Add Ingredient</button>
        <div *ngFor="let ingredient of ingredients">
          <div class="ingredient">
            <app-filtered-selector [value]="ingredient.name" [options]="getItemOptions()" (valueChanged)="setIngredientToItem(ingredient, $event)"></app-filtered-selector>
            <mat-form-field *ngIf="ingredient.name !== ''">
              <mat-label>Amount</mat-label>
              <input matInput [value]="ingredient.amount" (change)="setAmount(ingredient, $event)" type="number">
            </mat-form-field>
            <mat-form-field *ngIf="ingredient.name !== ''">
              <mat-label>Unit</mat-label>
              <input matInput [value]="ingredient.unitString" (change)="setUnit(ingredient, $event)">
            </mat-form-field>
          </div>
        </div>
      </div>
    </mat-tab>

    <!-- tabs for all the text sections -->
    <div *ngFor="let section of recipeSections">
      <mat-tab label="{{section.title}}">
        <div class="recipe-tab">
          <button mat-flat-button color="accent" (click) = "addBulletPointTo(section.bulletPoints)">Add Step</button>
          <div *ngFor="let bulletPoint of section.bulletPoints; index as i">
            <mat-form-field class="full-width" (dblclick)="removeObjectFromArray(section.bulletPoints, bulletPoint)">
              <textarea matInput (change)="setBulletPoint(section.bulletPoints, i, $event)" [value] = bulletPoint placeholder="Tray 1: Love"></textarea>
            </mat-form-field>
          </div>
        </div>
      </mat-tab>
    </div>
  </mat-tab-group>
  <button mat-flat-button color="warn" (click) = "addRecipe()">{{getRecipeButtonLabel()}}</button>
</div>

<mat-divider></mat-divider>


<form [formGroup]="itemFormGroup" (ngSubmit)="addItem()" class="creator-base">
  <h1>Item Creator</h1>
  <app-filtered-selector [options]="getItemOptions()" (valueChanged)="itemUpdateControl.setValue($event)"></app-filtered-selector>

  <mat-form-field>
    <mat-label>Name</mat-label>
    <input matInput formControlName="name">
  </mat-form-field>

  <mat-form-field>
    <mat-label>Default Amount</mat-label>
    <input matInput type="number" formControlName="amount">
  </mat-form-field>

  <mat-form-field>
    <mat-label>Default Unit</mat-label>
    <input matInput formControlName="unit">
  </mat-form-field>

  <mat-checkbox formControlName="fresh">Is Fresh</mat-checkbox>

  <button mat-flat-button color="warn" type = "submit">{{getItemButtonLabel()}}</button>
</form>

